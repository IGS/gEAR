<div class='row'>
  <div id='note_side_panel_title_c' class='col-12'>
    <div class="row">
      <div id="note_header_c" class="col-8">
        <div class="note_header">
          Notes
        </div>
      </div>
      <div id="sidepanel_options_docked" class="col-4">
          <div class="btn-group pull-right">
            <button id="note_position_menu" type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown" data-placement="auto" aria-haspopup="true" aria-expanded="false" title="Move note panel">
              <span class="fa fa-ellipsis-v"></span>
            </button>
            <div id="position_dropdown_menu" class="dropdown-menu" aria-labelledby="note_position_menu">
              <button id="movenote2left" class="dropdown-item" type="button" data-toggle="tooltip" title="Dock left side" data-placement="bottom"><span class="fa fa-arrow-left"></span></button>
              <button id="movenote2right" class="dropdown-item" type="button" data-toggle="tooltip" title="Dock right side" data-placement="bottom"><span class="fa fa-arrow-right"></span></button>
              <!--<button id="movenote2popout" class="dropdown-item" type="button" data-toggle="tooltip" title="Move to new window" data-placement="bottom"><span class="fa fa-external-link"></span></button>-->
            </div>
            <button id="note_panel_closer" type="button" class="btn btn-xs" data-toggle="tooltip" data-placement="bottom" title="Close Notes">
              <span class="fa fa-times"></span>
            </button>
          </div>
      </div> <!-- end #sidepanel_options_docked -->
      <div id="sidepanel_options_popped" class="col-2">
            <button id="movenote2popin" type="button" class="btn btn-xs pull-right" data-toggle="tooltip" data-placement="bottom" title="Dock to right side">
              <span class="fa fa-external-link"></span>
            </button>
      </div> <!-- end #sidepanel_options_popped -->
    </div> <!-- end .row -->
    <div class="row">
      <div class="col-12 note_dataset_title_c">
        <span id="dataset_title"></span>
      </div>
    </div>
  </div>
</div> <!-- end .row of #note_side_panel_title_c -->
<div class='row'>
  <div id='note_side_panel_body_c' class='col-12'>
    <div id='note_controls_c' class='row'>
      <div class="btn-toolbar" role="toolbar" aria-label="...">
        <div class='btn-group pull-right' role='group' aria-label='...'>
          <button id="btn_sort_note_date" type="button" class="btn btn-xs" data-toggle="tooltip" data-placement="bottom" title="Sort notes by date">
            <span class="fa fa-sort-amount-asc" aria-hidden="true"></span> Date
          </button>
          <button id="btn_sort_note_title" type="button" class="btn btn-xs" data-toggle="tooltip" data-placement="bottom" title="Sort notes by title">
            <span class="fa fa-sort-alpha-asc" aria-hidden="true"></span> Title
          </button>
        </div>
        <div class='btn-group pull-right' role='group' aria-label='...'>
          <button id="btn_hide_public" type="button" class="btn btn-xs" data-toggle="tooltip" data-placement="bottom" title="Hide public notes">
            <span class="fa fa-eye-slash" aria-hidden="true"></span> Public
          </button>
        </div>
      </div>
    </div> <!-- end #note_controls_c -->
    <div class='row'>
      <div id='note_table_c' class='table-responsive'>
        <table class='table table-hover'>
          <tbody id='note_table_body'>
            <!-- content inserted via jsrender in sidepanel_notes.js:get_dataset_notes() -->
          </tbody>
        </table>
      </div> <!-- end #note_table_c-->
      <div id='add_note_c' class="edit_note">
        <div id='add_note_form_c' style="height:100%;">
          <form id="add_new_note_form" name="add_new_note_form">
            <input type="hidden" id="dataset_id" name="dataset_id" value="">
            <div class="form-group note_input_title_c ">
                <input type="text" class="form-control form-control-lg" id="add_note_title" placeholder="Note Title" value="" maxlength="100">
            </div>
            <div class="form-group note_textarea_c">
              <textarea class="form-control" id="add_note_text" placeholder="Type your notes here..."></textarea>
            </div>
            <div class="form-group note_input_access_c">
              <label for="add_note_access_level">Is this note private or public?</label>
              <select class="form-control note_access" id="add_note_access_level" data-toggle="popover" data-content="<b>Caution!</b> Public notes are visible to everyone. Your name will also be displayed.">
                <option value="0" selected="selected">Private (only you)</option>
                <option value="1">Public</option>
              </select>
            </div>
            <div class="form-group col-12 note_input_c note_submit_c">
              <button id="save_new_note" class="btn btn-success pull-right" type="button">Save</button>
              <button id="cancel_new_note" class="btn btn-secondary pull-right" type="button">Cancel</button>
            </div>
          </form>
        </div>
      </div> <!-- end #add_note_c-->
      <div id="edit_notes_c" class="edit_note">
        <!-- content inserted via jsrender in sidepanel_notes.js:get_dataset_notes -->
      </div>
    </div>
  </div>
</div> <!-- end .row of #note_side_panel_body_c-->
<div class='row'>
  <div id='note_side_panel_footer_c' class='col-3'>
    <button id="add_note" type="button" class="btn btn-success btn-sm pull-right" data-toggle="tooltip" title="Add a note"><span class="fa fa-plus"></span></button>
  </div>
</div> <!-- end .row of #note_side_panel_footer_c -->
<script id="tmpl_notetable_body" type="text/x-jsrender">
  <tr id="row_{{:id}}" class="note_preview" data-note-id="{{:id}}" data-title="{{:title}}" data-date-changed="{{:date_last_changed}}" data-access="{{:access}}">
    <td>
      <div class="row">
        <div class="col-7 preview_title_c">
          <h3 class="preview_title">{{:title}}</h3>
        </div>
        <div class="col-3 preview_date_c">
          <p class="preview_date"><small class="text-muted">{{:date_formatted}}</small></p>
        </div>
        <div class="col-2 preview_access_c">
          {{if access == "Public"}}<h3 class="preview_access"><span class="label label-default pull-right">Public</span></h3>{{else}}{{/if}}
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <small class="text-muted">
            <span class="fa fa-user"></span>
            {{if is_owner == "0"}}
            {{:owner}}
            {{else}}
            You
            {{/if}}
          </small>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <small class="preview_text">{{:ldesc_preview}}</small>
        </div>
      </div>
    </td>
  </tr>
</script>
<script id="tmpl_edit_note" type="text/x-jsrender">
  {{if is_owner == "1"}}
  <div id='view_note_c_{{:id}}' class="able2edit" data-note-id="{{:id}}">
    <form id="edit_note_form_{{:id}}" name="edit_note_form_{{:id}}" class="edit_form">
      <input type="hidden" id="dataset_id" name="dataset_id" value="{{:dataset_id}}">
      <div class="form-group note_input_title_c">
          <input type="text" class="form-control form-control-lg" id="edit_note_title_{{:id}}" placeholder="Note Title" value="{{:title}}" maxlength="100">
      </div>
      <div class="form-group note_textarea_c">
        <textarea class="form-control" id="edit_note_text_{{:id}}" placeholder="Type your notes here...">{{:ldesc}}</textarea>
      </div>
      <div class="form-group note_input_access_c">
        <label for="edit_note_access_level_{{:id}}">Is this note private or public?</label>
        <select class="form-control note_access" id="edit_note_access_level_{{:id}}" data-note-id="{{:id}}" data-toggle="popover" data-content="<b>Caution!</b> Public notes are visible to everyone. Your name will also be displayed.">
          {{if access == 'Private'}}
          <option value="0" selected="selected">Private (only you)</option>
          <option value="1">Public</option>
          {{else}}
          <option value="0">Private (only you)</option>
          <option value="1" selected="selected">Public</option>
          {{/if}}
        </select>
      </div>
      <div id="edit_note_c_{{:id}}" class="form-group col-12 note_submit_c">
        <button id="save_edit_note" data-note-id="{{:id}}" class="btn btn-default btn-success pull-right btn_save_edit_note" data-toggle="tooltip" data-title="Save note" type="button">Save</button>
        <button id="cancel_edit_note_{{:id}}" data-note-id="{{:id}}" class="btn btn-secondary pull-right btn_cancel_edit_note" data-toggle="tooltip" data-title="Cancel" type="button">Cancel</button>
        <button id="remove_note_{{:id}}" data-note-id="{{:id}}" class="btn btn-danger pull-left btn_remove_note" data-toggle="tooltip" data-title="Delete note" type="button"><span class="fa fa-trash"></span></button>
      </div>
    </form>
    {{else}}
      <div id="view_note_c_{{:id}}" class="card unable2edit" data-note_id="{{:id}}">
        <div class="card-block">
          <h2 class="card-title">{{:title}}<span class="fa fa-times pull-right close-public-note"></span></h2>
          <hr />
          <p class="card-text text-muted"><span class="fa fa-user"></span> {{:owner}}</p>
          <p class="card-text text-muted"><span class="fa fa-clock-o"></span> {{:date_formatted}}</p>
          <br />
          <div class="card-text public_note_ldesc textarea-ldesc">{{:ldesc}}</div>
        </div>
      </div>
    {{/if}}
  </div>
</script>
