<!doctype html>
<html>

<head>
    <title>epiviz-charts</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="bower_components/epiviz-charts/epiviz-scatter-plot.html">
    <link rel="import" href="bower_components/epiviz-charts/epiviz-genes-track.html">
    <link rel="import" href="bower_components/epiviz-charts/epiviz-line-track.html">
    <link rel="import" href="bower_components/epiviz-charts/epiviz-blocks-track.html">
    <link rel="import" href="bower_components/epiviz-charts/epiviz-heatmap-plot.html">
    <link rel="import" href="bower_components/epiviz-charts/epiviz-line-plot.html">
    <link rel="import" href="bower_components/epiviz-charts/epiviz-stacked-line-plot.html">
    <link rel="import" href="bower_components/epiviz-charts/epiviz-stacked-line-track.html">

    <link rel="import" href="bower_components/epiviz-data-source/epiviz-data-source.html">
    <link rel="import" href="bower_components/epiviz-environment/epiviz-environment.html">
</head>

<body>
    <h3>Environment and charts</h3>
    <epiviz-data-source provider-type="epiviz.data.WebServerDataProvider" provider-id="umd" provider-url="http://epiviz-dev.cbcb.umd.edu/data2/main.php">
    </epiviz-data-source>
    <epiviz-environment 
                id="epivizEnv"
                chr="chr6"
                start="64076201"
                end="65088740"
                measurements='{
		"genes" :{
                        "id": "genes",
                        "name": "Genes",
                        "type": "range",
                        "datasourceId": "genes",
                        "datasourceGroup": "genes",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Genes Track",
                        "annotation": null,
                        "minValue": null,
                        "maxValue": null,
                        "metadata": [
                        "gene",
                        "entrez",
                        "exon_starts",
                        "exon_ends"
                        ]
			},
		"p1sc_3" : {
                        "id": "p1sc_3",
                        "name": "p1sc_3",
                        "type": "feature",
                        "datasourceId": "gene_expression",
                        "datasourceGroup": "gene_expression",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Heatmap",
                        "annotation": {"celltype": "sc", "day": "p1", "rep": 3},
                        "minValue": null,
                        "maxValue": null,
                        "metadata": ["gene"]
			},
		"p1sc_2" : {
                        "id": "p1sc_2",
                        "name": "p1sc_2",
                        "type": "feature",
                        "datasourceId": "gene_expression",
                        "datasourceGroup": "gene_expression",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Heatmap",
                        "annotation": {"celltype": "sc", "day": "p1", "rep": 2},
                        "minValue": null,
                        "maxValue": null,
                        "metadata": ["gene"]
			},
		"p1sc_1" : {
                        "id": "p1sc_1",
                        "name": "p1sc_1",
                        "type": "feature",
                        "datasourceId": "gene_expression",
                        "datasourceGroup": "gene_expression",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Heatmap",
                        "annotation": {"celltype": "sc", "day": "p1", "rep": 1},
                        "minValue": null,
                        "maxValue": null,
                        "metadata": ["gene"]
			},
		"p1hc_3" : {
                        "id": "p1hc_3",
                        "name": "p1hc_3",
                        "type": "feature",
                        "datasourceId": "gene_expression",
                        "datasourceGroup": "gene_expression",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Heatmap",
                        "annotation": {"celltype": "hc", "day": "p1", "rep": 3},
                        "minValue": null,
                        "maxValue": null,
                        "metadata": ["gene"]
			},
		"p1hc_2" : {
                        "id": "p1hc_2",
                        "name": "p1hc_2",
                        "type": "feature",
                        "datasourceId": "gene_expression",
                        "datasourceGroup": "gene_expression",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Heatmap",
                        "annotation": {"celltype": "hc", "day": "p1", "rep": 2},
                        "minValue": null,
                        "maxValue": null,
                        "metadata": ["gene"]
			},
		"p1hc_1" : {
                        "id": "p1hc_1",
                        "name": "p1hc_1",
                        "type": "feature",
                        "datasourceId": "gene_expression",
                        "datasourceGroup": "gene_expression",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Heatmap",
                        "annotation": {"celltype": "hc", "day": "p1", "rep": 1},
                        "minValue": null,
                        "maxValue": null,
                        "metadata": ["gene"]
			}, 
		"promoter_regions": {
			"id": "promoter_regions",
                        "name": "Promoter Regions",
                        "type": "range",
                        "datasourceId": "promoter_regions",
                        "datasourceGroup": "rpomoter_regions",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Blocks Track",
                        "annotation": null,
                        "minValue": null,
                        "maxValue": null,
                        "metadata": null
			},
                "p1hc_h3k27me3" : {
                        "id": "p1hc",
                        "name": "p1hc_h3k27me3",
                        "type": "feature",
                        "datasourceId": "chipseq",
                        "datasourceGroup": "chipseq",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Line Track",
                        "annotation": {"celltype": "hc"},
                        "minValue": -3,
                        "maxValue": 3,
                        "metadata": ["gene"]
			},
		"p1sc_h3k27me3" : {
                        "id": "p1sc",
                        "name": "p1sc_h3k27me3",
                        "type": "feature",
                        "datasourceId": "chipseq",
                        "datasourceGroup": "chipseq",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Line Track",
                        "annotation": {"celltype": "sc"},
                        "minValue": -3,
                        "maxValue": 3,
                        "metadata": ["gene"]
			},
                "p1hc_h3k9ac" : {
                        "id": "p1hc",
                        "name": "p1hc_h3k9ac",
                        "type": "feature",
                        "datasourceId": "chipseq_ac",
                        "datasourceGroup": "chipseq_ac",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Line Track",
                        "annotation": {"celltype": "hc"},
                        "minValue": -3,
                        "maxValue": 3,
                        "metadata": null
			},
                "brain_h3k4me1" : {
                        "id": "p1hc",
                        "name": "brain_h3k4me1",
                        "type": "feature",
                        "datasourceId": "ucsc_brain_h3k4me1",
                        "datasourceGroup": "ucsc_brain_h3k4me1",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Line Track",
                        "annotation": {"celltype": "hc"},
                        "minValue": 0,
                        "maxValue": 2,
                        "metadata": null
			},
                "brain_h3k4me3" : {
                        "id": "p1hc",
                        "name": "brain_h3k4me3",
                        "type": "feature",
                        "datasourceId": "ucsc_brain_h3k4me3",
                        "datasourceGroup": "ucsc_brain_h3k4me3",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Line Track",
                        "annotation": {"celltype": "hc"},
                        "minValue": 0,
                        "maxValue": 2,
                        "metadata": null
			},
                "brain_h3k36me3" : {
                        "id": "p1hc",
                        "name": "brain_h3k36me3",
                        "type": "feature",
                        "datasourceId": "ucsc_brain_h3k36me3",
                        "datasourceGroup": "ucsc_brain_h3k36me3",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Line Track",
                        "annotation": {"celltype": "hc"},
                        "minValue": 0,
                        "maxValue": 2,
                        "metadata": null
			},
                "brain_h3k27ac" : {
                        "id": "p1hc",
                        "name": "brain_h3k27ac",
                        "type": "feature",
                        "datasourceId": "ucsc_brain_h3k27ac",
                        "datasourceGroup": "ucsc_brain_h3k27ac",
                        "dataprovider": "umd",
                        "formula": null,
                        "defaultChartType": "Line Track",
                        "annotation": {"celltype": "hc"},
                        "minValue": 0,
                        "maxValue": 2,
                        "metadata": null
			}
                }'>
        <epiviz-genes-track id ="gTrack" class="charts" dim-s='["genes"]'></epiviz-genes-track>
        <epiviz-line-track id="lTrackac" class="charts" dim-s='["p1hc_h3k9ac"]'></epiviz-line-track>
        <epiviz-line-track id="lTrackUCSC" class="charts" dim-s='["brain_h3k27ac", "brain_h3k36me3", "brain_h3k4me3", "brain_h3k4me1"]'></epiviz-line-track>
        <epiviz-blocks-track id="bTrack" class="charts" dim-s='["promoter_regions"]'></epiviz-blocks-track>
        <epiviz-heatmap-plot id="hPlot" class="charts" dim-s='["p1hc_1", "p1hc_2", "p1hc_3", "p1sc_1", "p1sc_2", "p1sc_3"]'></epiviz-heatmap-plot>
    </epiviz-environment>
        <script>
        window.addEventListener('WebComponentsReady', function(e) {
                var lineTrackac = document.querySelector("#lTrackac");
                var lSettingsac = lineTrackac.chartSettings;
                lSettingsac.step = 50;
                lSettingsac.maxY = 2;
                lSettingsac.interpolation = "basis";
                lineTrackac.setAttribute("chart-settings", JSON.stringify(lSettingsac));

                var lineTrackUCSC = document.querySelector("#lTrackUCSC");
                var lSettingsUCSC = lineTrackUCSC.chartSettings;
                lSettingsUCSC.step = 50;
                lSettingsUCSC.maxY = 2;
                lSettingsUCSC.interpolation = "basis";
                lineTrackUCSC.setAttribute("chart-settings", JSON.stringify(lSettingsUCSC));

                var heatmap = document.querySelector("#hPlot");
                var hSettings = heatmap.chartSettings;
                hSettings.colLabel="gene";
                hSettings.rowLabel="celltype";
                hSettings.showColorsForRowLabels = true;
                hSettings.yMin = 0;
                hSettings.yMax = 5000;
                hSettings.title = "Gene Expression";
                heatmap.setAttribute("chart-settings", JSON.stringify(hSettings));
        });
    </script>
</body>

</html>
