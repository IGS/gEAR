<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>NeMO Archive Dataset Import Wizard</title>
    <meta name="description"
      content="This is a tool used to import one or more NeMO Archive portal datasets into NeMO Analytics.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">

    <!-- This is needed because mod_rewrite doesn't work well with relative paths.  This will need
             to be changed for any hosts where gEAR is not at the webserver root.
          -->
    <base href="/" />

    <link rel="stylesheet" href="css/gear-theme-purple.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.5.95/css/materialdesignicons.min.css" />

    <!-- Ensures we always get a new version (during our current active development cycles) -->
    <script>document.write('<link rel="stylesheet" href="css/common.v2' + (new Date()).getTime() + '.css" />');</script>
    <script>document.write('<link rel="stylesheet" href="nemoarchive_import/import.' + (new Date()).getTime() + '.css" />');</script>
</head>

<body>
    <div id="main-layout-c" class="columns is-fullheight">
        <!--#include virtual="/include/primary_nav.html" -->
        <section id="main-c" class="column pl-0">
            <!--#include virtual="/include/header_bar.html" -->
            <section id="content-c" class="m-3">
                <!-- This is the section to be populated for new pages -->
                <header class="columns section">
                    <div id="tool-desc-c" class="column is-3">
                        <h3 class="title is-3">
                            Import NeMO Archive data
                        </h3>
                        <p>This tool will tracked the automated process of importing data from NeMO Archive into NeMO
                            Analytics. Basic plots are created and it is encouraged to curate additional ones based on
                            needs.</p>
                    </div>
                    <div id="guides-outer-c" class="column is-offset-3 has-background-white-bis notification">
                        <h3 class="mt-4 mb-4">
                            <span>GUIDES</span>
                            <span class="icon is-pulled-right delete">
                                <i class="mdi mdi-close"></i>
                            </span>
                        </h3>
                        <div id="guides-inner-c" class="columns">
                            <div class="column">
                                <div class="guide-element pr-3">
                                    <div><!-- without the 2nd level div here the images disappears-->
                                        <div class="media">
                                            <div class="media-left">
                                                <figure class="image is-96x96">
                                                    <img src="/img/guide_image_mag_dna.png" alt="Placeholder image">
                                                </figure>
                                            </div>
                                            <div class="media-content is-size-7 has-text-weight-semibold">
                                                <p>
                                                    Learn how to use the dataset curation tool
                                                </p>
                                                <p class="mt-2"><a>Try now</a></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </header>

                <div id="main-content" class="container">

                    <h3 class="title is-3">NeMO Archive Import Tool</h3>

                    <h5 id="submission-title" class="subtitle is-5">
                        <span class="icon-text">
                            <span>Submission: <span id="submission-id"></span></span>
                            <span class="icon has-text-info is-clickable">
                                <i class="mdi mdi-share" aria-hidden="true"></i>
                            </span>
                        </span>
                    </h5>

                    <p id="not-supported-p">There were <span id="not-supported"></span> files that could not be imported
                        because their file type is not supported.</p>

                    <p class="content">
                        The NeMO Archive import tool is a useful utility for importing data into NeMO Analytics for
                        quick visualization.
                        Here, you can keep track of the status of importing and converting each requested file.
                        The tool will also attempt to create default plot curations for each dataset, though it is
                        highly recommended to visit the Single-Cell Analysis Workbench, Dataset Curator, or the
                        Multigene Viewer to create more relevant curations.
                    </p>

                    <div id="main-notify" class="notification is-info is-light is-hidden">
                        <button class="delete"></button>
                        <span></span>
                    </div>

                    <div id="main-alert" class="notification is-danger is-light is-hidden">
                        <button class="delete"></button>
                        <span></span>
                    </div>


                    <div id="import-finish" class="is-hidden my-4">
                        <div class="columns">
                            <div class="field column">
                                <label class="label" for="collection-name">OPTIONAL: Name collection</label>
                                <div class="control">
                                    <input class="input column is-half" type="text" id="collection-name"
                                      aria-describedby="collection-help">
                                </div>
                                <small id="collection-help" class="help">Enter a name for this collection of datasets. A
                                    permalink will be created for displaying visualizations for this collection</small>
                            </div>
                            <div class="field column">
                                <label class="label" for="global-gene-selection">OPTIONAL: Select gene for plotting
                                    expression</label>
                                <div class="control">
                                    <input class="input column is-half" type="text" id="global-gene-selection"
                                      aria-describedby="global-gene-selection-help">
                                </div>
                                <small id="global-gene-selection-help" class="help">This gene will be searched against
                                    when the "Visualize Collection" button is clicked.<br>Orthology mapping between
                                    species will be attempted if necessary. Any datasets missing this gene will not
                                    plot.</small>
                            </div>
                        </div>

                        <p id="partial-success" class="has-text-warning-dark is-hidden">Importing is complete, but some
                            datasets did not successfully import. Click "Visualize Collection" to view the successful
                            ones</p>
                        <p id="complete-success" class="is-hidden">Importing is complete. Click "Visualize Collection"
                            to view the collection</p>

                        <button id="view-datasets" class="button is-primary">Visualize Collection</button>
                    </div>
                    <div id="email-on-success-div" class="is-hidden my-4">
                        <p>If you would like, click this button, and we will email you when the datasets have finished
                            importing. We will attempt to choose the best metadata category for plotting.</p>
                        <button id="email-button" class="button is-link">Send Email Updates</button>
                    </div>

                    <div class="table-container">
                        <table class="table is-narrow is-striped is-fullwidth" id="submission-datasets">
                            <thead>
                                <tr>
                                    <th>File name</th>
                                    <th>Import Progress</th>
                                    <th>Current Step</th>
                                    <th>Message</th>
                                    <th>Metadata to Plot</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>
        </section>
    </div>

    <!-- Promise based HTTP client for the browser  -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!-- JS Imports -->
    <script src="js/vendor/js.cookie.js"></script>
    <script>document.write('<script src="js/classes/user.v2.' + (new Date()).getTime() + '.js"><\/script>');</script>
    <script>document.write('<script src="js/common.v2.' + (new Date()).getTime() + '.js"><\/script>');</script>
    <script>document.write('<script src="nemoarchive_import/import.' + (new Date()).getTime() + '.js"><\/script>');</script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-59916932-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-59916932-1');
    </script>

</body>

</html>